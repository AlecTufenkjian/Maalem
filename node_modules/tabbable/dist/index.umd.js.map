{"version":3,"file":"index.umd.js","sources":["../src/index.js"],"sourcesContent":["const candidateSelectors = [\n  'input',\n  'select',\n  'textarea',\n  'a[href]',\n  'button',\n  '[tabindex]',\n  'audio[controls]',\n  'video[controls]',\n  '[contenteditable]:not([contenteditable=\"false\"])',\n  'details>summary:first-of-type',\n  'details',\n];\nconst candidateSelector = /* #__PURE__ */ candidateSelectors.join(',');\n\nconst matches =\n  typeof Element === 'undefined'\n    ? function () {}\n    : Element.prototype.matches ||\n      Element.prototype.msMatchesSelector ||\n      Element.prototype.webkitMatchesSelector;\n\nconst getCandidates = function (el, includeContainer, filter) {\n  let candidates = Array.prototype.slice.apply(\n    el.querySelectorAll(candidateSelector)\n  );\n  if (includeContainer && matches.call(el, candidateSelector)) {\n    candidates.unshift(el);\n  }\n  candidates = candidates.filter(filter);\n  return candidates;\n};\n\nconst isContentEditable = function (node) {\n  return node.contentEditable === 'true';\n};\n\nconst getTabindex = function (node) {\n  const tabindexAttr = parseInt(node.getAttribute('tabindex'), 10);\n\n  if (!isNaN(tabindexAttr)) {\n    return tabindexAttr;\n  }\n\n  // Browsers do not return `tabIndex` correctly for contentEditable nodes;\n  // so if they don't have a tabindex attribute specifically set, assume it's 0.\n  if (isContentEditable(node)) {\n    return 0;\n  }\n\n  // in Chrome, <details/>, <audio controls/> and <video controls/> elements get a default\n  //  `tabIndex` of -1 when the 'tabindex' attribute isn't specified in the DOM,\n  //  yet they are still part of the regular tab order; in FF, they get a default\n  //  `tabIndex` of 0; since Chrome still puts those elements in the regular tab\n  //  order, consider their tab index to be 0.\n  if (\n    (node.nodeName === 'AUDIO' ||\n      node.nodeName === 'VIDEO' ||\n      node.nodeName === 'DETAILS') &&\n    node.getAttribute('tabindex') === null\n  ) {\n    return 0;\n  }\n\n  return node.tabIndex;\n};\n\nconst sortOrderedTabbables = function (a, b) {\n  return a.tabIndex === b.tabIndex\n    ? a.documentOrder - b.documentOrder\n    : a.tabIndex - b.tabIndex;\n};\n\nconst isInput = function (node) {\n  return node.tagName === 'INPUT';\n};\n\nconst isHiddenInput = function (node) {\n  return isInput(node) && node.type === 'hidden';\n};\n\nconst isDetailsWithSummary = function (node) {\n  const r =\n    node.tagName === 'DETAILS' &&\n    Array.prototype.slice\n      .apply(node.children)\n      .some((child) => child.tagName === 'SUMMARY');\n  return r;\n};\n\nconst getCheckedRadio = function (nodes, form) {\n  for (let i = 0; i < nodes.length; i++) {\n    if (nodes[i].checked && nodes[i].form === form) {\n      return nodes[i];\n    }\n  }\n};\n\nconst isTabbableRadio = function (node) {\n  if (!node.name) {\n    return true;\n  }\n  const radioScope = node.form || node.ownerDocument;\n\n  const queryRadios = function (name) {\n    return radioScope.querySelectorAll(\n      'input[type=\"radio\"][name=\"' + name + '\"]'\n    );\n  };\n\n  let radioSet;\n  if (\n    typeof window !== 'undefined' &&\n    typeof window.CSS !== 'undefined' &&\n    typeof window.CSS.escape === 'function'\n  ) {\n    radioSet = queryRadios(window.CSS.escape(node.name));\n  } else {\n    try {\n      radioSet = queryRadios(node.name);\n    } catch (err) {\n      // eslint-disable-next-line no-console\n      console.error(\n        'Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s',\n        err.message\n      );\n      return false;\n    }\n  }\n\n  const checked = getCheckedRadio(radioSet, node.form);\n  return !checked || checked === node;\n};\n\nconst isRadio = function (node) {\n  return isInput(node) && node.type === 'radio';\n};\n\nconst isNonTabbableRadio = function (node) {\n  return isRadio(node) && !isTabbableRadio(node);\n};\n\nconst isHidden = function (node) {\n  if (getComputedStyle(node).visibility === 'hidden') {\n    return true;\n  }\n\n  const isDirectSummary = matches.call(node, 'details>summary:first-of-type');\n  const nodeUnderDetails = isDirectSummary ? node.parentElement : node;\n  if (matches.call(nodeUnderDetails, 'details:not([open]) *')) {\n    return true;\n  }\n\n  while (node) {\n    if (getComputedStyle(node).display === 'none') {\n      return true;\n    }\n    node = node.parentElement;\n  }\n\n  return false;\n};\n\nconst isNodeMatchingSelectorFocusable = function (node) {\n  if (\n    node.disabled ||\n    isHiddenInput(node) ||\n    isHidden(node) ||\n    /* For a details element with a summary, the summary element gets the focused  */\n    isDetailsWithSummary(node)\n  ) {\n    return false;\n  }\n  return true;\n};\n\nconst isNodeMatchingSelectorTabbable = function (node) {\n  if (\n    !isNodeMatchingSelectorFocusable(node) ||\n    isNonTabbableRadio(node) ||\n    getTabindex(node) < 0\n  ) {\n    return false;\n  }\n  return true;\n};\n\nconst tabbable = function (el, options) {\n  options = options || {};\n\n  const regularTabbables = [];\n  const orderedTabbables = [];\n\n  const candidates = getCandidates(\n    el,\n    options.includeContainer,\n    isNodeMatchingSelectorTabbable\n  );\n\n  candidates.forEach(function (candidate, i) {\n    const candidateTabindex = getTabindex(candidate);\n    if (candidateTabindex === 0) {\n      regularTabbables.push(candidate);\n    } else {\n      orderedTabbables.push({\n        documentOrder: i,\n        tabIndex: candidateTabindex,\n        node: candidate,\n      });\n    }\n  });\n\n  const tabbableNodes = orderedTabbables\n    .sort(sortOrderedTabbables)\n    .map((a) => a.node)\n    .concat(regularTabbables);\n\n  return tabbableNodes;\n};\n\nconst focusable = function (el, options) {\n  options = options || {};\n\n  const candidates = getCandidates(\n    el,\n    options.includeContainer,\n    isNodeMatchingSelectorFocusable\n  );\n\n  return candidates;\n};\n\nconst isTabbable = function (node) {\n  if (!node) {\n    throw new Error('No node provided');\n  }\n  if (matches.call(node, candidateSelector) === false) {\n    return false;\n  }\n  return isNodeMatchingSelectorTabbable(node);\n};\n\nconst focusableCandidateSelector = /* #__PURE__ */ candidateSelectors\n  .concat('iframe')\n  .join(',');\n\nconst isFocusable = function (node) {\n  if (!node) {\n    throw new Error('No node provided');\n  }\n  if (matches.call(node, focusableCandidateSelector) === false) {\n    return false;\n  }\n  return isNodeMatchingSelectorFocusable(node);\n};\n\nexport { tabbable, focusable, isTabbable, isFocusable };\n"],"names":["candidateSelectors","candidateSelector","join","matches","Element","prototype","msMatchesSelector","webkitMatchesSelector","getCandidates","el","includeContainer","filter","candidates","Array","slice","apply","querySelectorAll","call","unshift","isContentEditable","node","contentEditable","getTabindex","tabindexAttr","parseInt","getAttribute","isNaN","nodeName","tabIndex","sortOrderedTabbables","a","b","documentOrder","isInput","tagName","isHiddenInput","type","isDetailsWithSummary","r","children","some","child","getCheckedRadio","nodes","form","i","length","checked","isTabbableRadio","name","radioScope","ownerDocument","queryRadios","radioSet","window","CSS","escape","err","console","error","message","isRadio","isNonTabbableRadio","isHidden","getComputedStyle","visibility","isDirectSummary","nodeUnderDetails","parentElement","display","isNodeMatchingSelectorFocusable","disabled","isNodeMatchingSelectorTabbable","tabbable","options","regularTabbables","orderedTabbables","forEach","candidate","candidateTabindex","push","tabbableNodes","sort","map","concat","focusable","isTabbable","Error","focusableCandidateSelector","isFocusable"],"mappings":"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"}